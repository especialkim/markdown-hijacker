# Markdown Hijacker 플러그인 테스트 시나리오

## 기본 설정 및 초기화 테스트

- [x] 플러그인 활성화 시 로그에 초기화 정보가 올바르게 표시됨
- [x] 외부 폴더 동기화 옵션 활성화/비활성화가 정상 작동함
- [x] Vault 내부 변경 동기화 옵션 활성화/비활성화가 정상 작동함
- [?] 폴더 매핑 추가 시 UUID가 올바르게 생성됨: ❓ UUID 확인은 어떻게 하는 건가?
- [x] 설정이 저장되고 재로드 시 유지됨

## 외부 폴더 -> Vault 동기화 테스트 (External Sync)

### 파일 생성 테스트
- [x] 외부 폴더에 새 마크다운 파일 생성 시 Vault에 동일한 파일이 생성됨
- [x] 외부 폴더에 하위 폴더의 마크다운 파일 생성 시 Vault에도 동일한 구조로 생성됨
- [!] 생성된 마크다운 파일에 originPath frontmatter가 추가됨
    - 기능 추가
        - 링크로 만들 때 공백 처리등에 주의해야 함 < > 를 활용하던지
        - ogirinPath는 file:///Users/yongminkim/Workspace/Temp/test/무제파일.md 와 같이 링크형태로
        - ogirinRoot는 file:///Users/yongminkim/Workspace/Temp/ 와 같이 external의 root폴더(sub폴더가 있을 수 있음)
        - {obsidian vault 쪽인데 이름을 뭐라고 하지?} obsidian://open?vault={VaultName}&file={Path} 처럼 옵시디언 링크가 들어가야함 URI 스타일
- [!] 비 마크다운 파일(예: .txt, .jpg) 생성 시 Vault에 동일하게 생성됨
    - 비 마크다운 파일은 제외함 항상 markdown 만 함
    - 나중에 설정에서 추가 확장자 옵션 추가할 계획임

### 파일 수정 테스트
- [x] 외부 폴더의 마크다운 파일 수정 시 Vault의 파일도 동일하게 업데이트됨
- [x] frontmatter 영역 수정 시 Vault 파일도 올바르게 업데이트됨
- [!] 동시에 여러 파일 수정 시 모두 올바르게 동기화됨
    - 여러개 파일 동시에 삭제할 때 누락되는 파일이 있음
- [!] 하위 폴더에서 md 를 수정하면 obsidian측에 업데이트 되지 않음

### 파일 삭제 테스트
- [x] 외부 폴더의 파일 삭제 시 Vault의 동일 파일도 삭제됨
- [!] 외부 폴더의 하위 폴더 삭제 시 Vault의 해당 폴더와 모든 콘텐츠도 삭제됨
    - markdown 이 있는 서브 폴더를 삭제하면 markdown은 삭제되고 subfolder는 obsidian측에 남아있음

### 파일 이름 변경 테스트
- [x] 외부 폴더에서 파일 이름 변경 시 Vault에서도 동일하게 변경됨
- [!] 외부 폴더에서 파일 경로 이동(다른 폴더로) 시 Vault에서도 동일하게 이동됨
    - sub 폴더로 이동하면 해당 파일은 obsidian에서 삭제가 되고, 파일이 생성되지 않음
    - 이 상태에서 external 측에서 파일을 수정해도 obsidian으로 동기화 되지 않음
    - 이런 경우 해당 경로의 파일이 없다고 함.

## Vault -> 외부 폴더 동기화 테스트 (Internal Sync)

### 파일 생성 테스트
- [x] Vault에 새 마크다운 파일 생성 시 외부 폴더그렇에 동일한 파일이 생성됨
- [!] Vault 내 하위 폴더에 파일 생성 시 외부 폴더에도 동일한 구조로 생성됨
    - 하위 폴더에서 파일을 생성할 떄 frontmatter 입력이 누락되는 경우가 있음
    - 하위 폴더에서 파일을 수정하면 External 에 반영이 되지 않음
- [!] 생성된 외부 마크다운 파일에 originPath frontmatter가 포함됨
    - 가끔씩 누락되는 경우가 있음
- [x] Vault에서 비 마크다운 파일 생성 시 외부 폴더에도 동일하게 생성됨

### 파일 수정 테스트
- [x] Vault의 마크다운 파일 수정 시 외부 폴더의 파일도 동일하게 업데이트됨
- [x] frontmatter 영역 수정 시 외부 파일도 올바르게 업데이트됨
- [x] 동시에 여러 파일 수정 시 모두 올바르게 동기화됨

### 파일 삭제 테스트
- [x] Vault의 파일 삭제 시 외부 폴더의 동일 파일도 삭제됨
- [!] Vault의 하위 폴더 삭제 시 외부 폴더의 해당 폴더와 모든 콘텐츠도 삭제됨
    - 폴더를 삭제하면 external에서 파일은 삭제되나 폴더는 삭제되지 않음

### 파일 이름 변경 테스트
- [x] Vault에서 파일 이름 변경 시 외부 폴더에서도 동일하게 변경됨
- [x] Vault에서 파일 경로 이동(다른 폴더로) 시 외부 폴더에서도 동일하게 이동됨
- [x] 파일 이름 변경 시 originPath frontmatter가 새 경로로 올바르게 업데이트됨

## 특수 상황 테스트 : 생략함.

### 동시 수정 충돌 처리
- [x] Vault와 외부 폴더에서 동시에 동일 파일 수정 시 충돌 해결 방식이 일관됨 (최신 시간 기준)
- [!] 한쪽에서 파일을 수정 중에 다른 쪽에서 삭제한 경우의 처리가 안정적임
    - 검토하지 않을 계획

### 네트워크 드라이브/외부 저장소 테스트
- [ ] 네트워크 드라이브에 연결된 외부 폴더와 동기화가 정상 작동함
- [ ] 클라우드 동기화 폴더(Dropbox, Google Drive 등)와 연동 시 정상 작동함
- [ ] USB 드라이브와 같은 외부 저장소와 동기화가 정상 작동함

### 대용량 파일 및 폴더 테스트
- [ ] 100KB 이상의 큰 마크다운 파일도 안정적으로 동기화됨
- [ ] 50개 이상의 파일이 포함된 폴더도 모두 정상적으로 동기화됨
- [ ] 5단계 이상의 깊은 폴더 구조도 올바르게 동기화됨

### 오류 처리 및 복구
- [ ] 존재하지 않는 외부 폴더 설정 시 적절한 오류 메시지 표시됨
- [ ] 권한이 없는 폴더에 대한 동기화 시도 시 오류 처리가 적절함
- [ ] 플러그인 비활성화 후 재활성화 시 이전 동기화 상태가 올바르게 복구됨
- [ ] Obsidian 재시작 후에도 모든 설정과 동기화 상태가 유지됨

## frontmatter 관련 테스트

- [ ] 기존 frontmatter가 있는 마크다운 파일에 originPath가 올바르게 추가됨
- [ ] frontmatter가 없는 마크다운 파일에 새 frontmatter가 올바르게 생성됨
- [ ] originPath 변경 시 동기화가 정상적으로 이루어짐
- [ ] originPath와 실제 경로가 불일치할 때 동기화 동작이 안정적임

## UI 및 사용자 경험 테스트

- [ ] 파일 변경 시 설정에 따라 알림이 적절히 표시됨
- [ ] 설정 UI가 직관적이고 모든 옵션이 명확하게 설명됨
- [ ] 폴더 매핑 추가/제거/수정이 UI에서 원활하게 작동함
- [ ] 동기화 상태가 상태 표시줄에 정확히 반영됨
- [ ] 디버그 모드에서 상세 로그가 올바르게 출력됨

## 성능 및 리소스 테스트

- [ ] 연속적인 파일 변경에도 메모리 사용량이 안정적임
- [ ] 동기화 처리 중 Obsidian의 일반 사용에 영향을 미치지 않음
- [ ] 배터리 소모가 과도하지 않음 (장기간 사용 시)
- [ ] CPU 사용량이 합리적인 수준으로 유지됨

## 호환성 테스트

- [ ] 다른 플러그인과 함께 사용 시 충돌이 발생하지 않음
- [ ] 다양한 운영체제(Windows, macOS, Linux)에서 정상 작동함
- [ ] 모바일 버전의 Obsidian에서도 정상 작동함 (가능한 경우)
- [ ] 다양한 마크다운 문법과 호환됨 (표, 코드 블록, LaTeX 등)

## 기타 테스트

- [ ] 플러그인 업데이트 시 기존 설정과 매핑이 보존됨
- [ ] 긴 파일 경로와 특수 문자가 포함된 파일 이름도 정상 처리됨
- [ ] 설정 초기화 기능이 올바르게 작동함
- [ ] 제외/포함 폴더 필터링 설정이 정상 작동함
